[uwsgi]

# Process management info
# Processes should be 2 x CPU.
# Threads are not used with 'gevent'
# The number of 'gevent' doesn't seem to matter at all. Needs investigating. (Libraries are not monkeypatched, etc..)
processes = 8
threads = 1
gevent = 100
master = true
uid = ubuntu
max-worker-lifetime = 30
idle = true
pidfile = /run/uwsgi.pid
##thunder-lock = true

# Pass on environment variables
for-readline = /etc/environment
  env = %(_)
endfor =

# Application info
chdir = /usr/local/bin/drift-base
wsgi-file = flask_uwsgi.py
callable  = app

# Web servers for nginx reverse proxy, local testing and uwsgitop.
# Number of listening sockets set to a rather high number.
socket = 0.0.0.0:10080
http = : 8080
stats=127.0.0.1:9191
listen = 1000

# Configure logging
logger = syslog:drift.uwsgi

# Toggle this on to enable simple call profiling:
#profiler=pycall
